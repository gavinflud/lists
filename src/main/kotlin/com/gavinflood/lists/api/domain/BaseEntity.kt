package com.gavinflood.lists.api.domain

import com.fasterxml.jackson.annotation.JsonIgnore
import java.util.*
import javax.persistence.*

/**
 * An abstract base entity that other entities should extend from if they need an autogenerated primary key.
 *
 * TODO: Remove JSON annotations as entities will not be used in the API requests/responses.
 */
@MappedSuperclass
abstract class BaseEntity {

    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    @Column(name = "id")
    val id: Long = 0

    @Column(name = "created_date")
    @JsonIgnore
    val createdDate = Date()

    @Column(name = "retired")
    @JsonIgnore
    var retired = false

    @Column(name = "retired_date")
    @JsonIgnore
    var retiredDate: Date? = null

    /**
     * Retire the row.
     */
    fun retire() {
        retired = true
        retiredDate = Date()
    }

}